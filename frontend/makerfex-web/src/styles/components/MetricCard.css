/* src/styles/components/MetricCard.css
   --------------------------------------------------------------------------
   MetricCard (single value + trend + sparkline)
   Matches your reference:
   - Full-height left accent strip
   - Title + big number + trend/timeframe inside card
   - Icon tile top-right
   - Sparkline bottom-right
   -------------------------------------------------------------------------- */

.mf-metric-card {
  --mf-metric-accent: var(--mf-accent-neutral);

  position: relative;
  display: grid;
  grid-template-columns: 6px minmax(0, 1fr);
  border-radius: var(--mf-radius-lg);
  border: 1px solid var(--mf-color-border-subtle);
  background: var(--mf-color-bg-primary);
  box-shadow: var(--mf-shadow-sm);
  overflow: hidden;
}

/* The colored strip */
.mf-metric-card__accent {
  background: var(--mf-metric-accent);
}

/* Card body */
.mf-metric-card__content {
  padding: 16px 18px;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Top row: left text + right icon */
.mf-metric-card__top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 14px;
}

.mf-metric-card__right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  flex: 0 0 auto;
}

.mf-metric-card__meta {
  min-width: 0;
}

.mf-metric-card__title {
  font-size: 0.82rem;
  font-weight: 750;
  color: var(--mf-color-text-primary);
  margin-bottom: 6px;
}

/* Big value */
.mf-metric-card__value {
  display: inline-flex;
  align-items: baseline;
  gap: 4px;
}

.mf-metric-card__number {
  font-size: 1.75rem;
  font-weight: 850;
  letter-spacing: 0.01em;
  color: var(--mf-color-text-primary);
  line-height: 1.05;
}

.mf-metric-card__unit {
  font-size: 0.95rem;
  font-weight: 750;
  color: var(--mf-color-text-primary);
  opacity: 0.9;
}

/* Trend row */
.mf-metric-card__trend {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  font-size: 0.8rem;
  font-weight: 700;
}

.mf-metric-card__trend-pct {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.mf-metric-card__trend-arrow {
  font-size: 0.85rem;
  line-height: 1;
  opacity: 0.9;
}

.mf-metric-card__trend-timeframe {
  font-weight: 650;
  color: var(--mf-color-text-secondary);
}

/* Trend coloring */
.mf-metric-card__trend.is-up .mf-metric-card__trend-pct {
  color: var(--mf-color-success);
}

.mf-metric-card__trend.is-down .mf-metric-card__trend-pct {
  color: var(--mf-color-danger);
}

.mf-metric-card__trend.is-flat .mf-metric-card__trend-pct {
  color: var(--mf-color-text-secondary);
}

/* Icon tile */
.mf-metric-card__icon {
  width: 38px;
  height: 38px;
  border-radius: 10px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  color: var(--mf-metric-accent);
  background: color-mix(in srgb, var(--mf-metric-accent) 14%, transparent);
}

/* Sparkline sits under icon area, aligned right */
.mf-metric-card__sparkline {
  width: 70px;
  opacity: 0.95;
  margin-top: -2px; /* pulls it up just a touch */
}

/* Tone helpers (set the accent strip/icon/sparkline) */
.mf-metric-card.tone-neutral {
  --mf-metric-accent: var(--mf-accent-neutral);
}

.mf-metric-card.tone-risk {
  --mf-metric-accent: var(--mf-accent-risk);
}

.mf-metric-card.tone-success {
  --mf-metric-accent: var(--mf-accent-success);
}

.mf-metric-card.tone-revenue {
  --mf-metric-accent: var(--mf-accent-revenue);
}

.mf-metric-card.tone-capacity {
  --mf-metric-accent: var(--mf-accent-capacity);
}

.mf-metric-card.tone-danger {
  --mf-metric-accent: var(--mf-accent-danger);
}

/* Responsive: allow sparkline to shrink without breaking layout */
@media (max-width: 520px) {
  .mf-metric-card__content {
    padding: 14px 14px;
  }

  .mf-metric-card__sparkline {
    width: 40px;
  }
}

.mf-metric-card__trend.is-good .mf-metric-card__trend-pct {
  color: var(--mf-color-success);
}
.mf-metric-card__trend.is-bad .mf-metric-card__trend-pct {
  color: var(--mf-color-danger);
}
.mf-metric-card__trend.is-flat .mf-metric-card__trend-pct {
  color: var(--mf-color-text-secondary);
}
